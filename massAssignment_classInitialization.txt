how to use mass assignment to metaprogram a Ruby class

